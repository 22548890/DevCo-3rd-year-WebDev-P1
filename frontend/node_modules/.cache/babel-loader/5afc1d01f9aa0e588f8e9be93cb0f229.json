{"ast":null,"code":"var _jsxFileName = \"/home/chris/data/cs334/group_32/frontend/src/Components/ContractPage.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport Header from './Other/Header';\nimport Contracts from './Other/Contracts';\nimport AddContract from './Other/AddContract';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport Menu from './Other/Menu';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ContractPage() {\n  _s();\n\n  const [showAddContract, setShowAddContract] = useState(false);\n  const [contracts, setContracts] = useState([]);\n  const [showAllContracts, setShowAllContracts] = useState(true);\n  const [showOpenContracts, setShowOpenContracts] = useState(false);\n  const [showClosedContracts, setShowClosedContracts] = useState(false); // extra constant needed\n\n  const [data, setData] = useState();\n  useEffect(() => {\n    const getContracts = async () => {\n      const contractsFromServer = await fetchContracts();\n      setContracts(contractsFromServer);\n    };\n\n    getContracts();\n  }, []); //Fetch Contracts\n\n  const fetchContracts = async contract => {\n    // const res = await fetch('http://localhost:5000/contracts')\n    // const data = await res.json()\n    fetch('http://127.0.0.1:5000/getCompanyContracts', {\n      'method': 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(response => setData(response)).catch(error => console.log(error));\n    return data;\n  };\n\n  const fetchContract = async id => {\n    // FIXME: What id is this???\n    const res = await fetch(`http://localhost:5000/contracts/${id}`);\n    const data = await res.json();\n    return data; // let data = null\n    // const requestOpt = {\n    //   method: 'GET',\n    //   headers: {'Content-Type': 'application/json'},\n    // }\n    // async function fetchFunc() {\n    //     return await fetch(`http://127.0.0.1:5000/getContract/${id}`, requestOpt)\n    //     .then(response => response.json())\n    //     .catch(error => console.log(error));\n    // }\n    // (async () => {\n    //     data = await fetchFunc();\n    // })()\n    // return data\n  }; //Add Contract\n\n\n  const addContract = async contract => {\n    // let data = null\n    // const requestOpt = {\n    //   method: 'POST',\n    //   headers: {'Content-Type': 'application/json'},\n    //   body: JSON.stringify({\n    //       'name':contract.contractName,\n    //       'length':contract.contractLength,\n    //       'value':contract.contractValue,\n    //       'description':contract.contractDes,\n    //       'programming_language':contract.contractLan,\n    //       'location':contract.location,\n    //       'open':contract.open\n    //   }),\n    // }\n    // async function fetchFunc() {\n    //     return await fetch('http://127.0.0.1:5000/createContract', requestOpt)\n    //     .then(response => response.json())\n    //     .catch(error => console.log(error));\n    // }\n    // (async () => {\n    //     data = await fetchFunc();\n    // })()\n    const requestOpt = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'name': contract.contractName,\n        'length': contract.contractLength,\n        'value': contract.contractValue,\n        'description': contract.contractDes,\n        'programming_language': contract.contractLan,\n        'location': contract.location,\n        'open': contract.open\n      })\n    };\n    fetch('http://127.0.0.1:5000/createContract', requestOpt).then(response => response.json()).then(response => setData(response)).catch(error => console.log(error));\n    setContracts([...contracts, data]);\n  };\n\n  const showDevelopers = async id => {\n    const devsToShow = await fetchContract(id);\n    const showDev = { ...devsToShow,\n      showDevs: !devsToShow.showDevs\n    };\n    const res = await fetch(`http://localhost:5000/contracts/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(showDev)\n    });\n    const data = await res.json();\n    setContracts(contracts.map(contract => contract.id === id ? { ...contract,\n      showDevs: data.showDevs\n    } : contract));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        onAdd: () => setShowAddContract(!showAddContract),\n        showAdd: showAddContract\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), showAddContract && /*#__PURE__*/_jsxDEV(AddContract, {\n        onAdd: addContract,\n        showAdd: () => setShowAddContract(!showAddContract)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 29\n      }, this), !showAddContract ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Listed Contracts\", ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Menu, {\n          all: () => {\n            setShowAllContracts(true);\n            setShowOpenContracts(false);\n            setShowClosedContracts(false);\n          },\n          open: () => {\n            setShowAllContracts(false);\n            setShowOpenContracts(true);\n            setShowClosedContracts(false);\n          },\n          closed: () => {\n            setShowAllContracts(false);\n            setShowOpenContracts(false);\n            setShowClosedContracts(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 43\n        }, this), contracts.length > 0 ? /*#__PURE__*/_jsxDEV(Contracts, {\n          contracts: contracts,\n          all: showAllContracts,\n          open: showOpenContracts,\n          closed: showClosedContracts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 34\n        }, this) : 'No Contracts to Show']\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ContractPage, \"79zee7FdyuuHACJFrhjd15SW8gI=\");\n\n_c = ContractPage;\nexport default ContractPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContractPage\");","map":{"version":3,"sources":["/home/chris/data/cs334/group_32/frontend/src/Components/ContractPage.js"],"names":["useState","useEffect","Header","Contracts","AddContract","BrowserRouter","Router","Route","Menu","ContractPage","showAddContract","setShowAddContract","contracts","setContracts","showAllContracts","setShowAllContracts","showOpenContracts","setShowOpenContracts","showClosedContracts","setShowClosedContracts","data","setData","getContracts","contractsFromServer","fetchContracts","contract","fetch","headers","then","response","json","catch","error","console","log","fetchContract","id","res","addContract","requestOpt","method","body","JSON","stringify","contractName","contractLength","contractValue","contractDes","contractLan","location","open","showDevelopers","devsToShow","showDev","showDevs","map","length"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport Header from './Other/Header'\nimport Contracts from './Other/Contracts'\nimport AddContract from './Other/AddContract'\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\nimport Menu from './Other/Menu'\n\n\nfunction ContractPage() {\n  const [showAddContract, setShowAddContract] = useState(false)\n  const [contracts, setContracts] = useState([])\n  const [showAllContracts, setShowAllContracts] = useState(true)\n  const [showOpenContracts, setShowOpenContracts] = useState(false)\n  const [showClosedContracts, setShowClosedContracts] = useState(false)\n\n  // extra constant needed\n  const [data, setData] = useState();\n\n  useEffect(() => {\n    const getContracts = async () => {\n      const contractsFromServer = await fetchContracts()\n      setContracts(contractsFromServer)\n    }\n\n    getContracts()\n  }, [])\n\n  //Fetch Contracts\n  const fetchContracts = async (contract) => {\n    // const res = await fetch('http://localhost:5000/contracts')\n    // const data = await res.json()\n\n    fetch('http://127.0.0.1:5000/getCompanyContracts', {\n    'method':'GET',\n    headers: { 'Content-Type': 'application/json' }\n    })\n    .then(response => response.json())\n    .then(response => setData(response))\n    .catch(error => console.log(error));\n\n    return data\n  }\n  \n\n\n  const fetchContract = async (id) => { // FIXME: What id is this???\n\n    const res = await fetch(`http://localhost:5000/contracts/${id}`)\n    const data = await res.json()\n\n    return data\n    // let data = null\n    // const requestOpt = {\n    //   method: 'GET',\n    //   headers: {'Content-Type': 'application/json'},\n    // }\n    // async function fetchFunc() {\n    //     return await fetch(`http://127.0.0.1:5000/getContract/${id}`, requestOpt)\n    //     .then(response => response.json())\n    //     .catch(error => console.log(error));\n    // }\n    // (async () => {\n    //     data = await fetchFunc();\n    // })()\n\n    // return data\n  }\n\n  //Add Contract\n  const addContract = async (contract) => {\n    // let data = null\n    // const requestOpt = {\n    //   method: 'POST',\n    //   headers: {'Content-Type': 'application/json'},\n    //   body: JSON.stringify({\n    //       'name':contract.contractName,\n    //       'length':contract.contractLength,\n    //       'value':contract.contractValue,\n    //       'description':contract.contractDes,\n    //       'programming_language':contract.contractLan,\n    //       'location':contract.location,\n    //       'open':contract.open\n    //   }),\n    // }\n    // async function fetchFunc() {\n    //     return await fetch('http://127.0.0.1:5000/createContract', requestOpt)\n    //     .then(response => response.json())\n    //     .catch(error => console.log(error));\n    // }\n    // (async () => {\n    //     data = await fetchFunc();\n    // })()\n\n    const requestOpt = {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify({\n          'name':contract.contractName,\n          'length':contract.contractLength,\n          'value':contract.contractValue,\n          'description':contract.contractDes,\n          'programming_language':contract.contractLan,\n          'location':contract.location,\n          'open':contract.open\n      }),\n    }\n    fetch('http://127.0.0.1:5000/createContract', requestOpt)\n    .then(response => response.json())\n    .then(response => setData(response))\n    .catch(error => console.log(error));\n\n    setContracts([...contracts, data])\n\n  }\n\n  const showDevelopers = async (id) => {\n    const devsToShow = await fetchContract(id)\n    const showDev = {\n      ...devsToShow,\n      showDevs: !devsToShow.showDevs\n    }\n\n    const res = await fetch(`http://localhost:5000/contracts/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(showDev)\n    })\n\n    const data = await res.json()\n\n    setContracts(contracts.map((contract) => contract.id === id ? { ...contract, showDevs: data.showDevs } : contract))\n  }\n\n  return (\n    <Router>\n      <div className=\"container\">\n        <Header\n          onAdd={() => setShowAddContract(!showAddContract)}\n          showAdd={showAddContract}\n        />\n        {showAddContract && <AddContract onAdd=\n          {addContract} showAdd={() => setShowAddContract(!showAddContract)}/>}\n        {!showAddContract ? (\n          <><h2>Listed Contracts{' '}</h2><Menu\n            all={() => { setShowAllContracts(true); setShowOpenContracts(false); setShowClosedContracts(false) } }\n            open={() => { setShowAllContracts(false); setShowOpenContracts(true); setShowClosedContracts(false) } }\n            closed={() => { setShowAllContracts(false); setShowOpenContracts(false); setShowClosedContracts(true) } }\n          >\n          </Menu>\n        {contracts.length > 0 ? (<Contracts contracts={contracts} all={showAllContracts} open={showOpenContracts} closed={showClosedContracts}\n        />) : ('No Contracts to Show')}</>\n        ) : (\n          <p></p>\n        )}\n        \n      </div>\n      \n    </Router>\n  )\n}\n\nexport default ContractPage;"]},"metadata":{},"sourceType":"module"}